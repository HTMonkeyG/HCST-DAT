# 1.1 实体层
&emsp;&emsp;实体层是对于execute指令嵌套（<1.20）或execute子命令嵌套（>=1.20）的抽象描述。为叙述方便，下文使用旧execute语法进行描述。所述内容均可直接适配至新语法。

## 1.1.1 概念
&emsp;&emsp;一般情况下，execute指令用于修改执行者或创建新的执行分支。我们可以将一条嵌套的execute指令抽象为一个树结构。
```
execute @p ~~~ execute @e[type=item,c=3] ~~~ execute @e[type=creeper,r=2] ~~~ ...
----------------------------------------
    initial    - 表示命令块初始执行者
       |
       A       - @p
      /|\
     / | \
    B  C  D    - @e[type=item,c=3]
   /\  |   \
  E  F x    G  - @e[type=creeper,r=2]
      ...
```

&emsp;&emsp;对于其中任一层execute嵌套产生的所有分支，我们将该分支引用到的所有实体构成的多重集合称为一个**实体层**（Entity Layer）。

&emsp;&emsp;实体层是对于执行者修改或涉及到基于实体创建执行分支的抽象描述。对于旧版，执行者、执行位置、执行朝向的实体层无法分割，但新版中，此三者可分。as、positioned as、rotated as、at等子命令均创建了对应的实体层。在下文中，若无特殊描述，“实体层”均指旧版实体层，即对应于新版``as <selector> at @s``的实体层。

## 1.1.2 自指实体层
&emsp;&emsp;**本段落所述内容可能不适用于当前版本**

&emsp;&emsp;对于那些嵌套了execute却不直接修改执行者或分支，而是通过@s对本实体层内实体分支进行筛选与选择性截断的，我们将这类特殊的实体层称为**自指实体层**（Self-reference Entity Layer）。

&emsp;&emsp;在新版中，自指实体层完全可以使用``if entity @s``来实现。虽然写法完全不同，但是仍沿用“自指实体层”名称，并将其推广至所有涉及到自身的if/unless判定，如``if score @s itemCtr = THRESHOLD itemCtr``。